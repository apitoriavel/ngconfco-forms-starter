<mat-card>
  <mat-card-title>Add a new Entry</mat-card-title>
  <mat-card-content>
    <form #form="ngForm">

      <mat-form-field>
        <input type="text" matInput placeholder="User" 
        [(ngModel)]="entry.user" #user="ngModel" name="user" required>
        <mat-error *ngIf="user.errors?.required && (user.dirty || user.touched)">
          User is required
        </mat-error>
      </mat-form-field>
      

      <mat-form-field>
        <input type="text" matInput placeholder="Workshop" 
        [(ngModel)]="entry.workshop" #workshop="ngModel" 
        name="workshop" required minlength="5">

        <mat-error *ngIf="workshop.errors?.required && (workshop.dirty || workshop.touched)">
          Workshop is required
        </mat-error>
        <mat-error *ngIf="workshop.errors?.minlength && (workshop.dirty || workshop.touched)">
          Workshop length is too short
        </mat-error>

      </mat-form-field>

      <mat-form-field>
        <input type="text" matInput placeholder="Ticket Price" 
        [(ngModel)]="entry.ticketPrice" #ticketPrice="ngModel" 
        name="ticketPrice" required >
        <mat-error *ngIf="ticketPrice.errors?.required && (ticketPrice.dirty || ticketPrice.touched)">
          Ticket Price is required
        </mat-error>
      </mat-form-field>

      <mat-form-field>
        <input type="text" matInput placeholder="Workshop URL" 
        [(ngModel)]="entry.url" #url="ngModel" name="url"
        required [pattern]="urlPattern">
        <mat-error *ngIf="url.errors?.required && (url.dirty || url.touched)">
          Workshop URL is required
        </mat-error>
      </mat-form-field>

    </form>
  </mat-card-content>
  <mat-card-actions>
    <button [disabled]="form.invalid" (click)="submit()" mat-raised-button color="primary">Add</button>
    <button (click)="cancel()" mat-raised-button>Cancel</button>
  </mat-card-actions>
</mat-card>

<!-- <pre>
  user.valid: {{user.valid}}
</pre>

<code>
{{entry | json}}
</code> -->